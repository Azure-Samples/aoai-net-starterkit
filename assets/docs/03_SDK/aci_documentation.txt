Configure a GitHub Action to create a container instance Article • 05/03/2023 GitHub Actions is a suite of features in GitHub to automate your software development workflows in the same place you store code and collaborate on pull requests and issues. Use the Deploy to Azure Container Instances GitHub Actions to automate deployment of a single container to Azure Container Instances. The action allows you to set properties for a container instance similar to those in the az container create command. This article shows how to set up a workflow in a GitHub repo that performs the following actions: Build an image from a Dockerfile Push the image to an Azure container registry Deploy the container image to an Azure container instance This article shows two ways to set up the workflow: Configure GitHub workflow - Create a workflow in a GitHub repo using the Deploy to Azure Container Instances action and other actions. Use CLI extension - Use the az container app up command in the Deploy to Azure extension in the Azure CLI. This command streamlines creation of the GitHub workflow and deployment steps. ） Important The GitHub Actions for Azure Container Instances is currently in preview. Previews are made available to you on the condition that you agree to the supplemental terms of use . Some aspects of this feature may change prior to general availability (GA). Prerequisites GitHub account - Create an account on https://github.com if you don't already have one. Azure CLI - You can use the Azure Cloud Shell or a local installation of the Azure CLI to complete the Azure CLI steps. If you need to install or upgrade, see Install
Azure CLI. Azure container registry - If you don't have one, create an Azure container registry in the Basic tier using the Azure CLI, Azure portal, or other methods. Take note of the resource group used for the deployment, which is used for the GitHub workflow. Set up repo For the examples in this article, use GitHub to fork the following repository: https://github.com/Azure-Samples/acr-build-helloworld-node This repo contains a Dockerfile and source files to create a container image of a small web app. Ensure Actions is enabled for your repository. Navigate to your forked repository and select Settings > Actions. In Actions permissions, ensure that Allow all actions is selected. Configure GitHub workflow Create credentials for Azure authentication Service principal In the GitHub workflow, you need to supply Azure credentials to authenticate to the Azure CLI. The following example creates a service principal with the Contributor role scoped to the resource group for your container registry. First, get the resource ID of your resource group. Substitute the name of your group in the following az group show command: Azure CLI groupId=$(az group show \ --name <resource-group-name> \ --query id --output tsv) Use az ad sp create-for-rbac to create the service principal: